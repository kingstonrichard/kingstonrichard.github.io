---
layout: post
title: "We built our own Income Management solution"
date: 2019-01-02
categories: work
intro: This is the story of why we chose to develop our own critical software solution, over renewing an incumbent contract
---
Let me start this post by briefly explaining the function of income management within local authorities. It presents a significant challenge in terms of logistics at the very least. Monies continually arrive from a variety of different sources (citizens, businesses, partners, etc.) for many different reasons (taxes, fines, services delivered, etc.) via many different methods (cash, cheque, card, elecontric, etc.) and through many different channels (direct debit, standing order, bank transfer, automated telephone service, etc.). Digital transactions happen quickly. Physical cash transactions take a little longer. In any given hour on any given day there are potentially hundreds if not thousands of incoming transactions that need to be taken care of.

Every penny of every transaction must be captured, verified, validated to make sure we understand where its come from and why its here. Once approved they must be routed off to the right internal account(s) in our SAP system to balance our creditor records and to update other system records that we hold. Mr Smith has paid his parking fine and so we should now cancel any automatic reminders we were due to issue to him. It must all happen quickly, efficiently and correctly! Preferably, it should be automated. It's a huge coordination effort. The need for (and cost of) human effort should be minimised, as should any opportunity for processing errors to sneak in at points along the way. As a single account can see thousands of transactions a day, even the smallest error carries the potential to cause big issues.

And so as you might expect, software has a huge part to play in this 24x7x365 operation. Up until recently, colleagues at Barnsley Council had been orchestrating this choreographed dance very well, with the support of a suite of software products from one of the well-known major suppliers to local government. My technical team had configured that suite into a streamlined work of art. They'd worked closely with our internal departments to define it's various rules of validation, it's steps of automation, the required channels that it made avaialble and they'd configured the whole thing to within an inch of it's life. The situation was good.

Good, but not perfect! It wasn't an easy task keeping on top of it all. We know that we weren't always using the suite to the best of its abilities. We weren't always squeezing the most out of it's potential. But even so, our experience of it was that the individual products in the suite didn’t necessarily play all that well together and that meant our staff had lots of manual input to do despite our technical efforts. It was often necessary to double key transactional data over several screens. Interfaces were unfriendly, seemingly designed c1995 and staff had to absolutely know their way around the suite in detail to use it safely. Strong training for new and even some existing users was crucial and my technical team received a high number of service desk calls to "undo" mistakes as they happened0.

That suite though proved to be the best on the market for meeting our income management requirements several times over. We'd had it in place for around 10 years, because it kept winning our tenders and being awarded our contracts. The most recent it won was for a 3 year term, due to expire on the 31st March 2018. It carried a 6 month notice period (October 2017) for the negotiation of any changes, renewals, cancellations, etc. and so as we approached the summer of 2017, we instigated the necessary internal and external conversations around our options going forwards.

Unfortunately, over the months that followed we were unable to reach an agreement of terms with our incumbent supplier and negotiations broke down. Having suspected that might be the case early on in the process, we acknowledged that we needed to be prepared for being in a position of either having to a) renew the contract on the suppliers terms or b) replace the entire suite of products with technologies that we already had available in-house! This second option was accepting that running a new tender exercise to bring in a completely new supplier with new software would be near-on impossible. And so we quickly set to work to see what might be viable.

Now, I've blogged before about how in Barnsley we're very lucky to have an outstanding software development team in our IT department! By the end of September 2017 they had unbelievably created a proof of concept so good, that it demonstrated a clear capability with our existing in-house tools to meet all of our income management needs! Also, subject to suitable resourcing and a financial input it could be operational by the end of February 2018 - a whole month before the incumbent software expired! Stakeholder agreements were quickly sought, a business case was pulled together and suddenly the challenge was set!

The end solution was to be an in-house developed web-based product, created using the Microsoft Dot Net Core Framework, Entity Framework and SQL Server - as an organisation that primarily uses SAP and Microsoft technologies, this made for a great infrastructure fit and ensured it could be supported and maintained going forwards. Given the timescales, it would be a minimum viable product designed only to meet our current needs. Extensions and add-ons would only be considered for inclusion later with the exception of a few key requirements that would enhance the income management dramatically with only relatively little effort.

And so, the council committed £50K (from it's 2017/18 budget) to a 'replacement' project in return for what was expected to be a minimum £50K saving year on year from that point forward. And this was after taking into account any additional transactional charges that might result from this change. It cleared a path through some other planned projects and created an agile project team made up of key stakeholders from the IT development team, IT project management team, Internal Audit and Finance departments. Following a Scrum methodology and using Microsoft DevOps (Visual Studio Team Services at the time), the team ran fortnightly sprints with goals as follows:

1. Develop the outline software infrastructure and get a single self-service web form accepting online payments in test
2. Reconfigure remaining self-service and mediated web forms to take payments using the new software in test
3. Enable transaction tracking, reconciliation and refund capabilities in test
4. Prepare for inital launch (refunds, reports, admin portal install scripts, security context) in test
5. Live launch for a specific group of self-service web forms (waste management, e.g. order a bin, book a bulky collection)
6. Create functionality to transfer monies between internal accounts
7. Launch remaining self-service eForms to live. Begin configuration of mediated shopping basket functionality
8. Complete and launch mediated basket
9. Training and rollout of solution plus increase code coverage regarding automated testing.
10. Improve transfer functionality per feedback from stakeholder group.
11. Develop new credit note requirements that have emerged from stakeholder group.
12. Develop functionality to allow cash income to be submitted to the centre.
13. Creation of routines for migration of historic data, final updates and tweaks requested by the stakeholder group.
14. Launch of cash submissions, close down of previous software suite and migration of historic data
15. Tidy up of loose ends

Now, all of that took us right up to the wire but by the end of March 2018 we had succesfully moved from the previous suite of software products, over to our new single in-house solution. Sure, there were teething issues and since the end of the project we've added in some new features and resolved a few bugs. We now see though significantly fewer service desk jobs as a support team! Our staff are using a modern, responsive, well performing product that doesn't require double keying over several outdated interfaces. Every transaction is audited against SSO accounts and key integrations between the solution and SAP are established. We're absolutely thrilled with it and in the fullness of time would love to open it up for other local authorities to look at and even use.

That said, we're conscious of the GovPay offer from the Government Digital Service (which sadly wasn't available to local authorities when all of this started for us - they were piloting with only a few select councils at that time) and we haven't yet decided how best to actually make it available. Should we open source it on GitHub or multi-tenant it and run it as a SaaS offer in the cloud? Perhaps if we open sourced it, others could work with us to turn it into a multi-tenanted SaaS offer. Perhaps other council's would just like to take a copy in return for providing operational feedback - of course we'd advise with any implementation.

The other big consideration in all of this is that the risk of failure is now entirely ours. Procuring big software products from big software suppliers provides an element of security. It buys a comfort blanket, applies penalties to failures, transfers costs and risks of ownership out of the organisation - all things we now don't have the luxury of doing with our Income Management function. But honestly, we're 9 months in and enjoying the fruit of our efforts. Maintenance is minimal. Support calls are minimal. Change requests are... we haven't had one for 6 months. Transaction counts are up. 

What we've done here is satisfy our business needs in a generic way that we think will work for others, make significant ongoing savings and opened what we see as an opportunty to work with others in a collaborative way, improving the solution as we go.
